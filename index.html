import React, { useState, useEffect } from ‘react’;
import { Check, Plus, Calendar } from ‘lucide-react’;

export default function ThreeTasks() {
const [tasks, setTasks] = useState([]);
const [input, setInput] = useState(’’);
const [stats, setStats] = useState({ streak: 0, rate: 0 });

useEffect(() => {
const saved = localStorage.getItem(‘tasks’);
const savedStats = localStorage.getItem(‘stats’);
if (saved) setTasks(JSON.parse(saved));
if (savedStats) setStats(JSON.parse(savedStats));
}, []);

const addTask = () => {
if (input.trim() && tasks.length < 3) {
const newTasks = […tasks, { text: input, done: false, id: Date.now() }];
setTasks(newTasks);
localStorage.setItem(‘tasks’, JSON.stringify(newTasks));
setInput(’’);
}
};

const toggle = (id) => {
const newTasks = tasks.map(t => t.id === id ? { …t, done: !t.done } : t);
setTasks(newTasks);
localStorage.setItem(‘tasks’, JSON.stringify(newTasks));

```
if (newTasks.every(t => t.done) && newTasks.length === 3) {
  const newStats = { streak: stats.streak + 1, rate: stats.rate + 1 };
  setStats(newStats);
  localStorage.setItem('stats', JSON.stringify(newStats));
}
```

};

const reset = () => {
setTasks([]);
localStorage.setItem(‘tasks’, JSON.stringify([]));
};

const complete = tasks.filter(t => t.done).length;
const progress = (complete / 3) * 100;

return (
<div style={{
minHeight: ‘100vh’,
background: ‘linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%)’,
padding: ‘2rem’,
fontFamily: ‘-apple-system, BlinkMacSystemFont, “Segoe UI”, sans-serif’,
color: ‘#fff’
}}>
<div style={{ maxWidth: ‘480px’, margin: ‘0 auto’ }}>

```
    <div style={{ marginBottom: '4rem', textAlign: 'center' }}>
      <h1 style={{ 
        fontSize: '1.5rem', 
        fontWeight: '300', 
        letterSpacing: '0.1em',
        margin: 0,
        opacity: 0.6,
        textTransform: 'uppercase'
      }}>Three</h1>
      <div style={{
        fontSize: '6rem',
        fontWeight: '200',
        margin: '1rem 0',
        lineHeight: 1
      }}>{complete}/3</div>
      <div style={{
        height: '2px',
        background: '#333',
        borderRadius: '1px',
        overflow: 'hidden',
        margin: '2rem auto',
        maxWidth: '200px'
      }}>
        <div style={{
          height: '100%',
          background: 'linear-gradient(90deg, #fff 0%, #888 100%)',
          width: `${progress}%`,
          transition: 'width 0.5s cubic-bezier(0.4, 0, 0.2, 1)'
        }} />
      </div>
    </div>

    {tasks.map(task => (
      <div key={task.id} 
        onClick={() => toggle(task.id)}
        style={{
          padding: '1.5rem',
          marginBottom: '1px',
          background: task.done ? '#1a1a1a' : '#222',
          cursor: 'pointer',
          display: 'flex',
          alignItems: 'center',
          gap: '1rem',
          transition: 'all 0.3s ease',
          borderLeft: task.done ? '3px solid #fff' : '3px solid transparent'
        }}>
        <div style={{
          width: '20px',
          height: '20px',
          border: '1px solid #555',
          borderRadius: '50%',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          background: task.done ? '#fff' : 'transparent',
          transition: 'all 0.3s ease'
        }}>
          {task.done && <Check size={14} color="#000" strokeWidth={3} />}
        </div>
        <span style={{
          flex: 1,
          opacity: task.done ? 0.4 : 1,
          textDecoration: task.done ? 'line-through' : 'none',
          fontSize: '1rem',
          fontWeight: '300',
          letterSpacing: '0.02em'
        }}>{task.text}</span>
      </div>
    ))}

    {tasks.length < 3 && (
      <div style={{
        padding: '1.5rem',
        background: '#1a1a1a',
        display: 'flex',
        gap: '1rem',
        marginTop: tasks.length ? '1px' : 0
      }}>
        <input
          value={input}
          onChange={(e) => setInput(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && addTask()}
          placeholder="Add task"
          style={{
            flex: 1,
            background: 'transparent',
            border: 'none',
            color: '#fff',
            fontSize: '1rem',
            outline: 'none',
            fontWeight: '300'
          }}
        />
        <button onClick={addTask} style={{
          background: 'transparent',
          border: '1px solid #333',
          color: '#fff',
          width: '40px',
          height: '40px',
          borderRadius: '50%',
          cursor: 'pointer',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          transition: 'all 0.2s ease'
        }}>
          <Plus size={18} />
        </button>
      </div>
    )}

    {complete === 3 && (
      <div style={{
        marginTop: '3rem',
        padding: '2rem',
        background: '#fff',
        color: '#000',
        textAlign: 'center',
        fontWeight: '300',
        letterSpacing: '0.1em'
      }}>
        DAY COMPLETE
      </div>
    )}

    <div style={{
      marginTop: '4rem',
      display: 'flex',
      gap: '2rem',
      justifyContent: 'center',
      opacity: 0.4,
      fontSize: '0.9rem',
      fontWeight: '300'
    }}>
      <div style={{ textAlign: 'center' }}>
        <div style={{ fontSize: '1.5rem', marginBottom: '0.5rem' }}>{stats.streak}</div>
        <div style={{ textTransform: 'uppercase', fontSize: '0.7rem', letterSpacing: '0.1em' }}>Streak</div>
      </div>
      <div style={{ textAlign: 'center' }}>
        <div style={{ fontSize: '1.5rem', marginBottom: '0.5rem' }}>{stats.rate}</div>
        <div style={{ textTransform: 'uppercase', fontSize: '0.7rem', letterSpacing: '0.1em' }}>Total</div>
      </div>
    </div>

    {tasks.length === 3 && (
      <button onClick={reset} style={{
        marginTop: '3rem',
        width: '100%',
        padding: '1rem',
        background: 'transparent',
        border: '1px solid #333',
        color: '#666',
        cursor: 'pointer',
        fontSize: '0.8rem',
        letterSpacing: '0.1em',
        textTransform: 'uppercase',
        fontWeight: '300'
      }}>
        Reset Day
      </button>
    )}
  </div>
</div>
```

);
}
